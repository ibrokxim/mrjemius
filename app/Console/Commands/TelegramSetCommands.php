<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Telegram\Bot\Laravel\Facades\Telegram;

class TelegramSetCommands extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'telegram:set-commands';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ´Ğ»Ñ Telegram Ğ±Ğ¾Ñ‚Ğ°';

    /**
     * Execute the console command.
     *
     * @return int
     */
    public function handle()
    {
        $this->info('Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ´Ğ»Ñ Telegram Ğ±Ğ¾Ñ‚Ğ°...');

        try {
            // Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ½Ğ°ÑˆĞ¸Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
            $commands = [
                ['command' => 'start', 'description' => 'ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ / ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ°'],
                ['command' => 'catalog', 'description' => 'ğŸ›ï¸ ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³'],
                ['command' => 'cart', 'description' => 'ğŸ›’ ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ'],
                ['command' => 'myorders', 'description' => 'ğŸ‘¤ ĞœĞ¾Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹'],
                ['command' => 'support', 'description' => 'ğŸ“ ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ²ÑĞ·ÑŒ'],
            ];

            // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ² Telegram API
            $response = Telegram::setMyCommands(['commands' => $commands]);

            if ($response) {
                $this->info('ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹!');
                $this->comment('ĞœĞ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ğ¸Ğ½ÑƒÑ‚, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ²ÑÑ‚ÑƒĞ¿Ğ¸Ğ»Ğ¸ Ğ² ÑĞ¸Ğ»Ñƒ. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Telegram, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ¸Ñ… Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ.');
            } else {
                $this->error('ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹.');
            }

        } catch (\Exception $e) {
            $this->error('ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°: ' . $e->getMessage());
            return 1;
        }

        return 0;
    }
}
